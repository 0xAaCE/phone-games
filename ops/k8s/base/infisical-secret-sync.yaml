apiVersion: secrets.infisical.com/v1alpha1
kind: InfisicalSecret
metadata:
  name: phone-games-secrets
  namespace: phone-games
spec:
  # Infisical Universal Auth (Machine Identity)
  authentication:
    universalAuth:
      credentialsRef:
        secretName: infisical-auth
        secretNamespace: phone-games
      secretsScope:
        projectSlug: phone-games
        envSlug: staging
        secretsPath: "/"

  # Managed secret details - this will be created/updated by the operator
  managedSecretReference:
    secretName: database-credentials
    secretNamespace: phone-games
    creationPolicy: "Owner"

  # Infisical project settings
  hostAPI: http://infisical-infisical-standalone-infisical.infisical.svc.cluster.local:8080/api
  resyncInterval: 60  # Sync every 60 seconds
---
apiVersion: secrets.infisical.com/v1alpha1
kind: InfisicalSecret
metadata:
  name: phone-games-firebase-secrets
  namespace: phone-games
spec:
  authentication:
    universalAuth:
      credentialsRef:
        secretName: infisical-auth
        secretNamespace: phone-games
      secretsScope:
        projectSlug: phone-games
        envSlug: staging
        secretsPath: "/"

  managedSecretReference:
    secretName: firebase-credentials
    secretNamespace: phone-games
    creationPolicy: "Owner"

  hostAPI: http://infisical-infisical-standalone-infisical.infisical.svc.cluster.local:8080/api
  resyncInterval: 60
---
apiVersion: secrets.infisical.com/v1alpha1
kind: InfisicalSecret
metadata:
  name: phone-games-postgres-secrets
  namespace: phone-games
spec:
  authentication:
    universalAuth:
      credentialsRef:
        secretName: infisical-auth
        secretNamespace: phone-games
      secretsScope:
        projectSlug: phone-games
        envSlug: staging
        secretsPath: "/"

  managedSecretReference:
    secretName: postgres-credentials
    secretNamespace: phone-games
    creationPolicy: "Owner"

  hostAPI: http://infisical-infisical-standalone-infisical.infisical.svc.cluster.local:8080/api
  resyncInterval: 60
---
apiVersion: secrets.infisical.com/v1alpha1
kind: InfisicalSecret
metadata:
  name: phone-games-external-secrets
  namespace: phone-games
spec:
  authentication:
    universalAuth:
      credentialsRef:
        secretName: infisical-auth
        secretNamespace: phone-games
      secretsScope:
        projectSlug: phone-games
        envSlug: staging
        secretsPath: "/"

  managedSecretReference:
    secretName: external-credentials
    secretNamespace: phone-games
    creationPolicy: "Owner"

  hostAPI: http://infisical-infisical-standalone-infisical.infisical.svc.cluster.local:8080/api
  resyncInterval: 60
