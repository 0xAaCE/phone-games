apiVersion: secrets.infisical.com/v1alpha1
kind: InfisicalSecret
metadata:
  name: phone-games-secrets
  namespace: phone-games
spec:
  # Infisical service token secret reference
  authentication:
    serviceToken:
      serviceTokenSecretReference:
        secretName: infisical-service-token
        secretNamespace: phone-games

  # Managed secret details - this will be created/updated by the operator
  managedSecretReference:
    secretName: database-credentials
    secretNamespace: phone-games
    creationPolicy: "Owner"

  # Infisical project settings
  hostAPI: http://infisical.infisical.svc.cluster.local:8080/api
  resyncInterval: 60  # Sync every 60 seconds
---
apiVersion: secrets.infisical.com/v1alpha1
kind: InfisicalSecret
metadata:
  name: phone-games-firebase-secrets
  namespace: phone-games
spec:
  authentication:
    serviceToken:
      serviceTokenSecretReference:
        secretName: infisical-service-token
        secretNamespace: phone-games

  managedSecretReference:
    secretName: firebase-credentials
    secretNamespace: phone-games
    creationPolicy: "Owner"

  hostAPI: http://infisical.infisical.svc.cluster.local:8080/api
  resyncInterval: 60
---
apiVersion: secrets.infisical.com/v1alpha1
kind: InfisicalSecret
metadata:
  name: phone-games-postgres-secrets
  namespace: phone-games
spec:
  authentication:
    serviceToken:
      serviceTokenSecretReference:
        secretName: infisical-service-token
        secretNamespace: phone-games

  managedSecretReference:
    secretName: postgres-credentials
    secretNamespace: phone-games
    creationPolicy: "Owner"

  hostAPI: http://infisical.infisical.svc.cluster.local:8080/api
  resyncInterval: 60
